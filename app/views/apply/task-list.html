{% extends "layouts/main.html" %}

{% set showBackLink = false %}

<!-- Set statuses -->
{% set completedStatus = { text: "Completed" } %}
{% set notstartedStatus = { tag: { text: "Not Started", classes: "govuk-tag--grey" } } %}
{% set incompleteStatus = { tag: { text: "In Progress", classes: "govuk-tag--blue" } } %}
<!-- // -->


{% if data['fundName'] == "High Street Rental Auctions" %}
    {% set pageHeading = "Start or continue an application for funding to cover the cost of delivering a High Street Rental Auction" %}
    {% set pageSection = "High Street Rental Auctions fund Refurbishment project" %}
{% elif data['fundName'] == "Community Ownership" %}
    {% set pageHeading = "Start or continue an application for funding to save an asset in your community" %}
    {% set pageSection = 'Community Ownership Fund ' + data.fundRound + '' %}
{% elif data['fundName'] == "Digital Planning Improvement" %}
    {% set pageHeading = "Application for funding to begin your digital planning improvement journey" %}
    {% set pageSection = 'Digital Planning Improvement Fund ' + data.fundRound + '' %}
{% else %}
    {% set pageHeading = "Start or continue an application for {fund details}" %}
    {% set pageSection = "Fund name and round information" %}
{% endif %}

{% block pageTitle %}{{ macroPageTitle.pageTitle(pageHeading) }}{% endblock %}

{% block content %}


<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">

        {{ macroPageHeader.pageHeader(pageHeading,pageSection) }}

		<!-- Help details content -->
		{% include "/apply/includes/help-with-application.html" %}
		<!-- // -->

		<!-- Fund date and reference -->
		<p><strong>Submission deadline:</strong> {{ data.fundDeadlineDate }}
		<br><span><strong>Reference:</strong> DPIF-R3-IQPIJK</span>
		<!-- // -->



		{% if data['statusApplication'] == "Complete" %}

		</p>
		<div class="govuk-inset-text blue govuk-!-padding-bottom-7 govuk-!-margin-bottom-8">
			<h2 class="govuk-heading-l">All sections complete</h2>
			<p>You can submit your application when you are ready.</p>
			<p>Once your application has been submitted, you cannot change your answers.</p>

			<form method="post" action="" >

				{{ govukButton({
                	text: "Submit your application"
            	}) }}

			</form>
		</div>

		{% else %}

			<br><span><strong>Status:</strong></span> {{ govukTag({ text: "Not Started", classes: "govuk-tag--grey"  }) }}</p>
			<p>None of the sections have been completed.</p>

		{% endif %}


      	{# To switch between the completed and incomplete statues, use some inline logic within the component below, like this: "status: (completedStatus if ... else incompleteStatus)" #}

		<h2 class="govuk-heading-m">1. Before you start</h2>
      	{{ govukTaskList({
        	idPrefix: "first-section",
        	items: [
          		{ title: { text: "1.1 Name your application" }, href: "/apply/application-name/", status: ( completedStatus if data['applicationNameComplete'] == "yes" else notstartedStatus ) }

        	]
      	}) }}

		  <h2 class="govuk-heading-m">2. About your organisation</h2>
      	{{ govukTaskList({
        	idPrefix: "first-section",
        	items: [
          		{ title: { text: "2.1 Organisation information" }, href: "/apply/organisation/", status: ( completedStatus if data['organisationDetailsComplete'] == "yes" else notstartedStatus ) }
        	]
      	}) }}

		  <h2 class="govuk-heading-m">3. Your skills and experience</h2>
      	{{ govukTaskList({
        	idPrefix: "first-section",
        	items: [
          		{ title: { text: "3.1 Your skills and experience" }, href: "/apply/skills-and-experience/", status: ( completedStatus if data['skillsExperienceComplete'] == "yes" else notstartedStatus ) },
				{ title: { text: "3.2 Roles and recruitment" }, href: "/apply/roles-and-recruitment/", status: ( completedStatus if data['rolesRecruitmentComplete'] == "yes" else notstartedStatus ) }
        	]
      	}) }}

		  <h2 class="govuk-heading-m">4. About your project</h2>
      	{{ govukTaskList({
        	idPrefix: "first-section",
        	items: [
          		{ title: { text: "4.1 Engaging the ODP (Open Digital Planning) community" }, href: "/apply/engaging-digital-planning/", status: ( completedStatus if data['engagingDigitalPlanningComplete'] == "yes" else notstartedStatus ) },
				{ title: { text: "4.2 Engaging the organisation" }, href: "/apply/engaging-the-organisation/", status: ( completedStatus if data['engagingOrganisationComplete'] == "yes" else notstartedStatus ) },
				{ title: { text: "4.3 Dataset information" }, href: "/apply/dataset-information/", status: ( completedStatus if data['engagingOrganisationComplete'] == "yes" else notstartedStatus ) }
        	]
      	}) }}

		  <h2 class="govuk-heading-m">5. Future work</h2>
      	{{ govukTaskList({
        	idPrefix: "first-section",
        	items: [
          		{ title: { text: "5.1 Future work" }, href: "/apply/future-work/", status: ( completedStatus if data['futureWorComplete'] == "yes" else notstartedStatus ) }
        	]
      	}) }}

		  <h2 class="govuk-heading-m">6. Declarations</h2>
      	{{ govukTaskList({
        	idPrefix: "first-section",
        	items: [
          		{ title: { text: "6.1 Declarations" }, href: "/apply/declarations/", status: ( completedStatus if data['declarationsComplete'] == "yes" else notstartedStatus ) }
        	]
      	}) }}

      	<!-- <div class="govuk-!-margin-top-5">
        	{{ govukButton({ text: "Apply", href: "#" }) }}
      	</div> -->

    </div>
  </div>
{% endblock %}